#include "modules/algorithm.h"
#include "utils/assert.h"

#define test(map, size, id, move, is_fire) \
{\
	class server_data data((char *)map, size, id);\
	auto result = algorithm(data);\
	/*printf("%d, %d\n", result.first, result.second);*/ \
	assert(result.first == move);\
	assert(result.second == is_fire);\
}

int main()
{
	test("[MAP 95 "
		"0000000000000000000000000"
		"4444343142394434449339320"
		"3229000000004191394353990"
		"2559904129309500000000000"
		"5354305245533909125990000"
		"5425901332444100000000920"
		"4192105459914100439300920"
		"03549042953432004593s0135"
		"0932300000000000453900220"
		"0314302595013300119109110"
		"01113099G9091200000004210"
		"0142304429009209115992990"
		"0110000000000903519452150"
		"0131109949000203519423220"
		"0549209000000505351451350"
		"0299994444000395111192130"
		"0192322349000000000000000"
		"045539492394343531a000000"
		"0414495291155294252243100"
		"0299313442915145952219900"
		"0131951345321225439491000"
		"03924919550G0000000000000"
		"0229242543513119542311090"
		"0123555155422543592233010"
		"0000000000000000000000000]"
		"[LOCATION 95 443 -1 195 -1 -1 -1 -1 -1]"
		"[SCORE 95 117 55 137 2 60 1 103 157]",
		25, 2, move_op_down, false);

	test("[MAP fT "
		"5542000000000000000000000"
		"3999013519001922252942130"
		"3154055125004531549334520"
		"5392045595004452454399320"
		"5419000000029121142459140"
		"43310s0031935435231399390"
		"1232000092595559435395920"
		"1215921913511191535531930"
		"2234435534922154324124490"
		"1255113311299129544422430"
		"1422912344331423422345950"
		"390004933290000000000009s"
		"310221151199441215422904w"
		"5902523923995221913921090"
		"0204419091140000000053020"
		"04034210G1195144339033010"
		"0101534094239322395033030"
		"0502222034359434554035040"
		"0304245021914454334011000"
		"0903941025343459222092951"
		"0404339045525525459052123"
		"410454200d225141299013435"
		"03w9993099241925231051434"
		"0000091091594419149000012"
		"4241459059151325233514133" "]"
		"[LOCATION fT 324 130 534 552 -1 -1 299 -1]"
		"[SCORE fT 65 76 23 29 23 23 57 68]", 25, 1, move_op_down, false);

	test("[MAP A@ "
		"12345"
		"0sdwG"
		"99999"
		"54321"
		"w2345"
		"][LOCATION A@ 20 6 7 8][SCORE 10 1 2 3]", 5, 0, move_op_up, false);

	test("[MAP A@ "
		"w3000"
		"20000"
		"00000"
		"00000"
		"0000G"
		"][LOCATION A@ 0][SCORE 10]", 5, 0, move_op_right, false);

	return 0;
}
